{"ast":null,"code":"import _slicedToArray from\"/Users/juancvegao/Documents/PROGRAMMING/REACT/ejerciciosUniversidad/phonebookApp_mongoose_mods/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{notesPhonebook}from'./axios_phoneBookPost/notesPhonebookPost.jsx';import{PersonForm}from'./componentsPhonebook/PersonForm';import{useEffect,useState}from'react';import{FilteredList}from'./componentsPhonebook/FilteredList';import{ListPeople}from'./componentsPhonebook/ListPeople';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PhonebookPost=function PhonebookPost(){var mainStyle={color:'black',fontFamily:'helvetica'};var stylesNotification={color:'green',fontSize:19,backgroundColor:'lightGrey',height:60,width:500,display:'flex',alignItems:'center',justifyContent:'center'};var stylesError={color:'red',fontSize:19,backgroundColor:'lightGrey',height:60,width:500,display:'flex',alignItems:'center',justifyContent:'center'};var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newNumber=_useState2[0],setNewNumber=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),persons=_useState4[0],setPersons=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),filterNames=_useState8[0],setFilterNames=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),notificationError=_useState10[0],setNotificationError=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),notificationAdd=_useState12[0],setNotificationAdd=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),stylesGreen=_useState14[0],setStylesGreen=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),stylesRed=_useState16[0],setStylesRed=_useState16[1];var onChangeEventName=function onChangeEventName(event){setNewName(function(){return event.target.value;});};var onChangeEventNumber=function onChangeEventNumber(event){setNewNumber(function(){return event.target.value;});};var onChangeFilter=function onChangeFilter(event){setFilterNames(function(){return event.target.value;});};var onSubmitFilter=function onSubmitFilter(event){event.preventDefault();};// let results = () => {fetch(\"/.netlify/functions/getPersons.js\").then(response=> response.json());}\n// console.log(\"RESULTS\", results())\nuseEffect(function(){console.log(\".....useEffect getting().....\");notesPhonebook.getting().then(function(response){setPersons(response);});},[newNumber]);var filteredNames=function filteredNames(addPersons){var filtroGente=persons.filter(function(e){return e.name===newName;});if(filtroGente.length>0){if(window.confirm(\"\".concat(newName,\" is already in the list, do you want to update the old number?\"))){setNewName(function(){return\"\";});setNewNumber(function(){return\"\";});notesPhonebook.putting(filtroGente[0]._id,addPersons);setStylesGreen(stylesNotification);setNotificationAdd(\"Contact: '\".concat(newName,\"' has been updated\"));setTimeout(function(){return setStylesGreen({});},5000);setTimeout(function(){return setNotificationAdd(\"\");},5000);setNewName(function(){return\"\";});setNewNumber(function(){return\"\";});}else{setNewName(function(){return\"\";});setNewNumber(function(){return\"\";});}}else{notesPhonebook.posting(addPersons).then(function(resolve){setPersons(function(){return persons.concat(resolve);});setStylesGreen(stylesNotification);setNotificationAdd(\"New contact: '\".concat(newName,\"' has been added\"));setTimeout(function(){return setStylesGreen({});},5000);setTimeout(function(){return setNotificationAdd(\"\");},5000);setNewName(function(){return\"\";});setNewNumber(function(){return\"\";});});}};var onSubmitForm=function onSubmitForm(event){event.preventDefault();var addPersons={name:newName,number:newNumber};filteredNames(addPersons);};var deleteContact=function deleteContact(id,name){var filteredPersons=persons.filter(function(e){return e._id!==id;});notesPhonebook.deleting(id);setPersons(filteredPersons);setStylesRed(stylesError);setNotificationError(\"\".concat(name,\" has been deleted from the database\"));setTimeout(function(){return setNotificationError(\"\");},5000);setTimeout(function(){return setStylesRed({});},5000);};return/*#__PURE__*/_jsxs(\"div\",{style:mainStyle,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Changing .env Var\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Find contact\"}),/*#__PURE__*/_jsx(FilteredList,{persons:persons,filterNames:filterNames,onSubmitFilter:onSubmitFilter,onChangeFilter:onChangeFilter}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add contact\"}),/*#__PURE__*/_jsx(\"p\",{style:stylesGreen,children:notificationAdd}),/*#__PURE__*/_jsx(\"p\",{style:stylesRed,children:notificationError}),/*#__PURE__*/_jsx(PersonForm,{onSubmitForm:onSubmitForm,newName:newName,onChangeEventName:onChangeEventName,newNumber:newNumber,onChangeEventNumber:onChangeEventNumber}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(ListPeople,{arrayes:persons,deleteContact:deleteContact})]});};","map":{"version":3,"names":["notesPhonebook","PersonForm","useEffect","useState","FilteredList","ListPeople","PhonebookPost","mainStyle","color","fontFamily","stylesNotification","fontSize","backgroundColor","height","width","display","alignItems","justifyContent","stylesError","newNumber","setNewNumber","persons","setPersons","newName","setNewName","filterNames","setFilterNames","notificationError","setNotificationError","notificationAdd","setNotificationAdd","stylesGreen","setStylesGreen","stylesRed","setStylesRed","onChangeEventName","event","target","value","onChangeEventNumber","onChangeFilter","onSubmitFilter","preventDefault","console","log","getting","then","response","filteredNames","addPersons","filtroGente","filter","e","name","length","window","confirm","putting","_id","setTimeout","posting","resolve","concat","onSubmitForm","number","deleteContact","id","filteredPersons","deleting"],"sources":["/Users/juancvegao/Documents/PROGRAMMING/REACT/ejerciciosUniversidad/phonebookApp_mongoose_mods/frontend/src/PhonebookPost.jsx"],"sourcesContent":["import {notesPhonebook} from './axios_phoneBookPost/notesPhonebookPost.jsx'\nimport { PersonForm } from './componentsPhonebook/PersonForm'\nimport { useEffect, useState } from 'react'\nimport { FilteredList } from './componentsPhonebook/FilteredList'\nimport { ListPeople } from './componentsPhonebook/ListPeople'\n\nexport const PhonebookPost = () => {\n \n  const mainStyle = {\n    color: 'black',\n    fontFamily: 'helvetica'       \n  }\n  const stylesNotification = {\n    color: 'green',\n    fontSize: 19,\n    backgroundColor: 'lightGrey',\n    height:60,\n    width: 500,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n  \n  const stylesError = {\n    color: 'red',    \n    fontSize: 19,\n    backgroundColor: 'lightGrey',\n    height:60,\n    width: 500,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n  const [newNumber, setNewNumber] = useState(\"\")\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [filterNames, setFilterNames] = useState(\"\")\n\n  const [notificationError, setNotificationError] = useState(\"\")\n  const [ notificationAdd, setNotificationAdd] = useState(\"\")\n  const [ stylesGreen, setStylesGreen] = useState({})\n  const [ stylesRed, setStylesRed] = useState({})\n\n  const onChangeEventName = (event) => {\n    setNewName(() => event.target.value)  \n  }\n  const onChangeEventNumber = (event) => {\n    setNewNumber(()=> event.target.value)\n  }\n  const onChangeFilter = (event) =>{\n    setFilterNames(()=> event.target.value)   \n  }\n  const onSubmitFilter = (event) => {\n    event.preventDefault();\n  }\n\n  // let results = () => {fetch(\"/.netlify/functions/getPersons.js\").then(response=> response.json());}\n\n  // console.log(\"RESULTS\", results())\n\n  useEffect(() => {\n    console.log(\".....useEffect getting().....\") \n    notesPhonebook.getting()\n        .then(response=> {setPersons(response)}) \n  }, [newNumber])\n\n  const filteredNames = (addPersons) => {\n    const filtroGente = persons.filter(e=> e.name === newName)\n\n    if(filtroGente.length>0){\n        if(window.confirm(`${newName} is already in the list, do you want to update the old number?`)){           \n            setNewName(()=> \"\"); setNewNumber(()=> \"\")\n            notesPhonebook.putting(filtroGente[0]._id, addPersons)\n            setStylesGreen(stylesNotification)\n            setNotificationAdd(`Contact: '${newName}' has been updated`)\n            setTimeout(()=> setStylesGreen({}), 5000)\n            setTimeout(()=> setNotificationAdd(\"\"), 5000)\n            setNewName(()=> \"\")\n            setNewNumber(()=> \"\")\n        } else {\n            setNewName(()=> \"\"); setNewNumber(()=> \"\")\n        }\n        \n    }else{\n        notesPhonebook.posting(addPersons)\n        .then(resolve => {\n            setPersons(()=> persons.concat(resolve))\n            setStylesGreen(stylesNotification)\n            setNotificationAdd(`New contact: '${newName}' has been added`)\n            setTimeout(()=> setStylesGreen({}), 5000)\n            setTimeout(()=> setNotificationAdd(\"\"), 5000)\n            setNewName(()=> \"\")\n            setNewNumber(()=> \"\")\n        })\n    }}\n\n  const onSubmitForm = (event) => {\n    event.preventDefault();\n    const addPersons = {\n        name: newName,\n        number: newNumber,\n    }\n    filteredNames(addPersons)\n    }\n\n  const deleteContact = (id, name) =>{\n     const filteredPersons = persons.filter(e=> e._id !== id)\n     notesPhonebook.deleting(id)\n     setPersons(filteredPersons) \n      setStylesRed(stylesError)\n      setNotificationError(`${name} has been deleted from the database`)\n      setTimeout(()=> setNotificationError(\"\"), 5000)\n      setTimeout(()=> setStylesRed({}), 5000)\n    }\n      \n  return (\n    <div style={mainStyle}>\n      <h1>Phonebook</h1>\n      <h3>Changing .env Var</h3>\n      <h2>Find contact</h2>\n      \n      <FilteredList \n        persons={persons} \n        filterNames={filterNames} \n        onSubmitFilter={onSubmitFilter}\n        onChangeFilter={onChangeFilter}\n        />\n      \n      <h2>Add contact</h2>\n      <p style={stylesGreen}>{notificationAdd}</p>\n      <p style={stylesRed}>{notificationError}</p>\n      <PersonForm \n        onSubmitForm={onSubmitForm} \n        newName={newName} \n        onChangeEventName={onChangeEventName}\n        newNumber={newNumber}\n        onChangeEventNumber={onChangeEventNumber}\n        />\n\n      <h2>Numbers</h2>\n      <ListPeople \n        arrayes={persons}\n        deleteContact={deleteContact}\n        />\n        {/* {persons.map(e=> <li>{e.name}</li>)} */}\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}